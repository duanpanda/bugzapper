<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
    <link rel="stylesheet" href="bugzapper.css"/>
    <title>Super Bug Zapper</title>


    <script id="vertex-shader" type="x-shader/x-vertex">
     attribute vec4 aVertexPosition;
     attribute vec4 aVertexNormal;
     uniform mat4 uMVMatrix;
     uniform mat4 uPMatrix;
     uniform vec4 uLightPosition;
     varying vec3 vNormal, vLightVec, vEyeVec;

     void main(void) {
       vec3 pos = -(uMVMatrix * aVertexPosition).xyz;
       vec3 light = uLightPosition.xyz;
       vLightVec = normalize(light - pos);
       vEyeVec = pos;
       vNormal = normalize((uMVMatrix * aVertexNormal).xyz);
       gl_Position = uPMatrix * uMVMatrix * aVertexPosition;

     }
    </script>

    <script id="fragment-shader" type="x-shader/x-fragment">
     precision mediump float;
     uniform vec4 uLightAmbient;
     uniform vec4 uLightDiffuse;
     uniform vec4 uLightSpecular;
     uniform float uShininess;
     varying vec3 vNormal, vLightVec, vEyeVec;

     void main(void) {
       vec4 fColor;

       vec3 H = normalize(vLightVec + vEyeVec);
       vec4 ambient = uLightAmbient;

       float Kd = max(dot(vLightVec, vNormal), 0.0);
       vec4  diffuse = Kd*uLightDiffuse;

       float Ks = pow(max(dot(vNormal, H), 0.0), uShininess);
       vec4  specular = Ks * uLightSpecular;

       if (dot(vLightVec, vNormal) < 0.0) specular = vec4(0.0, 0.0, 0.0, 1.0);

       fColor = ambient + diffuse + specular;
       fColor.a = 1.0;

       gl_FragColor = fColor;
     }
    </script>

    <script type="text/javascript" src="common/webgl-utils.js"></script>
    <script type="text/javascript" src="common/initShaders.js"></script>
    <script type="text/javascript" src="common/MV.js"></script>
    <script type="text/javascript" src="bugzapper.js"></script>
  </head>

  <body>
    <canvas id="gl-canvas" width="512" height="512">
      Oops ... your browser doesn't support the HTML5 canvas element
    </canvas>
    <p> </p>
    <button id = "Button0">Increase R</button>
    <button id = "Button1">Decrease R</button>
    <p> </p>
    <button id = "Button2">Increase theta</button>
    <button id = "Button3">Decrease theta</button>
    <button id = "Button4">Increase phi</button>
    <button id = "Button5">Decrease phi</button>
    <p> </p>
    <button id = "Button6">Increase Subdivisions</button>
    <button id = "Button7">Decrease Subdivisions</button>
  </body>
</html>
